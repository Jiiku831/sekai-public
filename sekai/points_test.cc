#include "sekai/points.h"

#include <gmock/gmock.h>
#include <gtest/gtest.h>

#include "testing/util.h"

namespace sekai {
namespace {

TEST(SoloEbiPointsTest, PointsAreExpectedExample1) {
  std::array expected = {
      308, 311, 314, 317, 320, 323, 326, 329, 332, 335, 338, 341, 344, 348, 351, 354, 357, 360,
      363, 366, 369, 372, 375, 378, 381, 385, 388, 391, 394, 397, 400, 403, 406, 409, 412, 415,
      418, 421, 425, 428, 431, 434, 437, 440, 443, 446, 449, 452, 455, 458, 462, 465, 468, 471,
      474, 477, 480, 483, 486, 489, 492, 495, 498, 502, 505, 508, 511, 514, 517, 520, 523, 526,
      529, 532, 535, 539, 542, 545, 548, 551, 554, 557, 560, 563, 566, 569, 572, 575, 579, 582,
      585, 588, 591, 594, 597, 600, 603, 606, 609, 612, 616, 619, 622, 625, 628, 631, 634, 637,
      640, 643, 646, 649, 652, 656, 659, 662, 665, 668, 671, 674, 677, 680, 683, 686, 689};
  constexpr int kEb = 208;
  constexpr int kStep = 20000;
  for (int i = 0; static_cast<std::size_t>(i) < expected.size(); ++i) {
    for (int j = 0; j < kStep; ++j) {
      ASSERT_EQ(SoloEbiPoints(i * kStep + j, kEb), expected[i]) << "score: " << i * kStep + j;
    }
  }
}

TEST(SoloEbiPointsTest, PointsAreExpectedExample2) {
  std::array expected = {
      497,  501,  506,  511,  516,  521,  526,  531,  536,  541,  546,  551,  556,  561,
      566,  571,  576,  581,  586,  591,  596,  601,  606,  611,  616,  621,  626,  631,
      636,  641,  646,  651,  656,  661,  665,  670,  675,  680,  685,  690,  695,  700,
      705,  710,  715,  720,  725,  730,  735,  740,  745,  750,  755,  760,  765,  770,
      775,  780,  785,  790,  795,  800,  805,  810,  815,  820,  825,  829,  834,  839,
      844,  849,  854,  859,  864,  869,  874,  879,  884,  889,  894,  899,  904,  909,
      914,  919,  924,  929,  934,  939,  944,  949,  954,  959,  964,  969,  974,  979,
      984,  989,  994,  998,  1003, 1008, 1013, 1018, 1023, 1028, 1033, 1038, 1043, 1048,
      1053, 1058, 1063, 1068, 1073, 1078, 1083, 1088, 1093, 1098, 1103, 1108, 1113};
  constexpr int kEb = 397;
  constexpr int kStep = 20000;
  for (int i = 0; static_cast<std::size_t>(i) < expected.size(); ++i) {
    for (int j = 0; j < kStep; ++j) {
      ASSERT_EQ(SoloEbiPoints(i * kStep + j, kEb), expected[i]) << "score: " << i * kStep + j;
    }
  }
}

TEST(SoloEbiPointsTest, PointsAreExpectedExample3) {
  std::array expected = {
      681,  687,  694,  701,  708,  715,  721,  728,  735,  742,  749,  755,  762,  769,
      776,  783,  789,  796,  803,  810,  817,  824,  830,  837,  844,  851,  858,  864,
      871,  878,  885,  892,  898,  905,  912,  919,  926,  932,  939,  946,  953,  960,
      967,  973,  980,  987,  994,  1001, 1007, 1014, 1021, 1028, 1035, 1041, 1048, 1055,
      1062, 1069, 1075, 1082, 1089, 1096, 1103, 1110, 1116, 1123, 1130, 1137, 1144, 1150,
      1157, 1164, 1171, 1178, 1184, 1191, 1198, 1205, 1212, 1218, 1225, 1232, 1239, 1246,
      1253, 1259, 1266, 1273, 1280, 1287, 1293, 1300, 1307, 1314, 1321, 1327, 1334, 1341,
      1348, 1355, 1362, 1368, 1375, 1382, 1389, 1396, 1402, 1409, 1416, 1423, 1430, 1436,
      1443, 1450, 1457, 1464, 1470, 1477, 1484, 1491, 1498, 1505, 1511, 1518, 1525};
  constexpr int kEb = 581;
  constexpr int kStep = 20000;
  for (int i = 0; static_cast<std::size_t>(i) < expected.size(); ++i) {
    for (int j = 0; j < kStep; ++j) {
      ASSERT_EQ(SoloEbiPoints(i * kStep + j, kEb), expected[i]) << "score: " << i * kStep + j;
    }
  }
}

}  // namespace
}  // namespace sekai
